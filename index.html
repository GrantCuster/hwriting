<!DOCTYPE html>
<html lang="en">
  <head>
	<meta name="generator" content="Hugo 0.71.1" />
    <meta charset="utf-8">
    <link rel="icon" type="image/png" href="/favicon.png" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
      />
    <link rel="stylesheet" type="text/css" href="/font.css" />
    <link rel="stylesheet" type="text/css" href="/style.css" />
    


<title>Writing - Grant Custer</title>
<meta property="description" content="Writing about alternative interfaces and technology.">
<meta property="og:title" content="Writing - Grant Custer">
<meta property="og:description" content="Writing about alternative interfaces and technology.">
<meta property="og:image" content="https://writing.grantcuster.com/writing.png">
<meta property="og:url" content="https://writing.grantcuster.com/">
<meta property="twitter:card" content="summary_large_image">
<link rel="alternate" type="application/rss+xml" href="https://writing.grantcuster.com/rss.xml" title="Writing - Grant Custer" />

  </head>
  <body>
   <div class="hspacer"></div>
    <div class="container">
      <div class="jbm">
      <div>Grant Custer</div>
      <div><p style="margin: 0; text-indent: 2ch"><a href="https://feed.grantcuster.com">Feed</a>&nbsp; <a href="https://grantcuster.com">Index</a>&nbsp; <a href="https://twitter.com/grantcuster">Twitter</a></p></div>
      </div>
    </div>
    <div class="spacer"></div>
    
 <div class="container">
   <div style="font-weight: bold;">Writing</div> 
      
      
      <div style="padding-left: 2ch; text-indent: -2ch;">
        <span class="jbm">2020.10.06</span> <a href="/posts/2020-10-06-tri-release-notes/" style="font-weight: bold;">Tri: release notes</a>
      </div>
      
      
      <div style="padding-left: 2ch; text-indent: -2ch;">
        <span class="jbm">2020.09.21</span> <a href="/posts/2020-09-16-tile-release-notes/" style="font-weight: bold;">Tile: release notes</a>
      </div>
      
      
      <div style="padding-left: 2ch; text-indent: -2ch;">
        <span class="jbm">2020.09.12</span> <a href="/posts/2020-09-12-the-benefits-of-limitations-in-application-launchers/" style="font-weight: bold;">The benefits of limitations in application launchers</a>
      </div>
      
      
      <div style="padding-left: 2ch; text-indent: -2ch;">
        <span class="jbm">2020.09.01</span> <a href="/posts/2020-09-01-sift-release-notes/" style="font-weight: bold;">Sift: release notes</a>
      </div>
      
      
      <div style="padding-left: 2ch; text-indent: -2ch;">
        <span class="jbm">2020.08.20</span> <a href="/posts/2020-08-20-fantasy-consoles-and-framing/" style="font-weight: bold;">Fantasy consoles and framing</a>
      </div>
      
      
      <div style="padding-left: 2ch; text-indent: -2ch;">
        <span class="jbm">2020.07.30</span> <a href="/posts/2020-07-30-automadraw/" style="font-weight: bold;">Automadraw: release notes</a>
      </div>
      
      
      <div style="padding-left: 2ch; text-indent: -2ch;">
        <span class="jbm">2020.07.28</span> <a href="/posts/2020-07-28-bushido-blade-2-a-design-appreciation/" style="font-weight: bold;">Bushido Blade 2: a design appreciation</a>
      </div>
      
      
      <div style="padding-left: 2ch; text-indent: -2ch;">
        <span class="jbm">2020.07.12</span> <a href="/posts/2020-07-12-swapping-color-schemes-across-all-terminals-and-vim-with-pywal-and-base16/" style="font-weight: bold;">Swapping color schemes across all terminals and Vim with Pywal and Base16</a>
      </div>
      
      
      <div style="padding-left: 2ch; text-indent: -2ch;">
        <span class="jbm">2020.06.25</span> <a href="/posts/2020-06-25-vimlike/" style="font-weight: bold;">Vimlike</a>
      </div>
      
      <div class="spacer"></div>
      <hr />
      <div class="spacer"></div>
      
      
      <div class="post">
        <div class="jbm">2020.10.06</div>
        <h1><a href="/posts/2020-10-06-tri-release-notes/">Tri: release notes</a></h1>
        <div><p><img src="/images/tri-1601998955.gif" alt=""></p>
<p><a href="https://tri.constraint.systems">Tri</a> is an experimental image distorter. You can choose an image to render using a WebGL quad, adjust the texture and position coordinates to create different distortions, and save the result.</p>
<h2 id="understanding-webgl-textures">Understanding WebGL textures</h2>
<p>Tri is a direct result of my attempts to understand how texture mapping works in WebGL. I&rsquo;ve used WebGL (by way of Three.js) in several projects, but I&rsquo;ve never felt confident in my understanding of how it worked. Part of it is that I&rsquo;ve always been interested in using it for 2D stuff, where the vast majority of the info is (understandably) for 3D applications.</p>
<p>Recently, however, I found the <a href="https://webglfundamentals.org/">WebGL Fundamentals site</a> and started reading through their tutorials. Several of the early tutorials go through WebGL in terms of replicating methods from the HTML Canvas API. I&rsquo;ve gotten used to canvas through the Constraint Systems experiments, so this was a great way for me to come at it.</p>
<p>(Sidenote: all the time I&rsquo;ve been working with canvas, I&rsquo;ve had a nagging feeling that maybe I should be using WebGL instead, since it&rsquo;s generally so much better performance-wise. I was happy to find that a lot of that knowledge actually transfers over, and working with canvas has been good preparation for WebGL.)</p>
<p>Going through the WebGL Fundamentals examples on textures, I learned that you can do a lot of 2D work with WebGL by building out a sprite sheet and applying textures from it using the equivalent of canvas&rsquo;s <code>drawImage()</code> method. This is roughly how many of the grid-based Constraint Systems&rsquo; projects work, meaning (I think) that I could convert them over to WebGL without too much trouble.</p>
<h2 id="triangles">Triangles</h2>
<p>Before I started any conversions I wanted to explore a bit more about how WebGL works differently from canvas, though. Specifically, I wanted to try and get more of an understanding of the implications of everything being made of triangles. To replicate canvas&rsquo;s <code>drawImage()</code> which takes source and destination rectangles, you put together two triangles to make a quad. How a texture is applied in WebGL is based on two arrays. <code>positions</code> sets the position of the verticess that make up the shape (in this case two triangles). <code>textures</code> sets the coordinates for where the texture is sampled from. Both are fed into WebGL as flat arrays, 12 coordinates long (2 triangles * 3 vertices per triangle * 2 coordinates (x and y) per vertex).</p>
<figure>
    <img src="/images/shot-2020-09-29_12-04-52-1601395533-1602001724.png"/> <figcaption>
            <h4>An early version of the texture experiment.</h4>
        </figcaption>
</figure>

<p>To understand those triangles I started visualizing the arrays, drawing them (using canvas) over the top of a source image, displayed next to the WebGL render. There was a little bit of work to translate between <code>clipSpace</code>'s 0-1 and the pixel values of canvas. WebGL Fundamentals gave a good rundown of ways to do this. I think before I&rsquo;d found clip space off-putting. Now, having implemented my own zoom functions several times, I get the logic of keeping space relative until the final rasterization step. It was a bit fiddly to figure out in which order to draw the triangles based on the flat array, but I got there eventually.</p>
<p>After getting the canvas visualization and the WebGL render to work in tandem, I started to explore what kind of distortions you could get from changing the texture coordinates. It&rsquo;s an interesting set of behaviors, a result of both the triangle primitives and how it stretches/interpolates pixels (this is determined in part by the texture clipping settings, which based on WebGL Fundamentals I set to <code>CLAMP_TO_EDGE</code> and <code>NEAREST</code>). It can get pretty funhouse mirror-like. I also like how you can mirror the texture by folding the texture coordinates over on themselves.</p>
<p>The set of behaviors was interesting enough that I built out the rest of Tri, making the coordinates adjustable by clicking and dragging. I ended up locking the coordinates for where the triangles meet together. Making an object called <code>quad_map</code> that contained the coordinates for switching between thinking of the quad as four points and the actual six coordinates it is in the WebGL internals. Using that object as glue, Tri translates the adjustments you make pretty directly into the WebGL buffers themselves.</p>
<h2 id="forward">Forward</h2>
<p>Having completed Tri, I think I&rsquo;ll look more at transferring some of the existing Constraint Systems projects into WebGL. At least until I get sidetracked by another interesting interaction bit that I decided to make an experiment out of.</p>
</div>
        <div><a href="/posts/2020-10-06-tri-release-notes/">Permalink</a></div>
        <div class="spacer"></div>
        <hr />
        <div class="spacer"></div>
      </div>
      
      
      <div class="post">
        <div class="jbm">2020.09.21</div>
        <h1><a href="/posts/2020-09-16-tile-release-notes/">Tile: release notes</a></h1>
        <div><figure>
    <img src="/images/tile-1600271739.gif"/> 
</figure>

<p><a href="https://tile.constraint.systems">Tile</a> is an experimental image editor that lets you layout images using a tiling tree layout. You can move, split, and resize images using keyboard controls.</p>
<h2 id="motivation">Motivation</h2>
<h3 id="1-tiling-window-managers">1. Tiling window managers</h3>
<p>I&rsquo;ve been using the tiling window mananger <a href="https://i3wm.org/">i3wm</a> for around six months now. For my purposes, tiling windows are a much better and more intuitive experience than the dominant &ldquo;floating windows&rdquo; desktop metaphor. A big part of the motivation for making tile was wanting to dive in and explore how tiling logic works at the code level.</p>
<h3 id="2-dividing-up-space-from-the-outside-in">2. Dividing up space from the outside in</h3>
<p>In Tile (and i3wm) you divide up space from the outside in. You start from the window size, then you portion it up. It reminds me of folding a paper into sections. This is a different way of thinking about layout than I&rsquo;m used to, though it&rsquo;s hard to articulate exactly why. People may have recently become more familiar with tiling layouts from seeing them in Zoom video layouts.</p>
<p>Proportional splitting is built into web layout in the form of percentage units and the newer viewport units. CSS Grid also has you specify how to split up space. I think tiling feels different to me because the splitting up of space is the primary interaction, and you can do the splitting up incrementally with immediate feedback: &ldquo;first let&rsquo;s split this, ok and now this section, now let&rsquo;s stop and take a look.&rdquo; Even with CSS grid I feel more like I&rsquo;m building from the inside out.</p>
<h2 id="the-feel-of-tiling">The feel of tiling</h2>
<p>The main benefit of tiling is that it uses all the available screen space. In all of the Constraint Systems experiments I&rsquo;m interested in trying to go &ldquo;with the grain&rdquo; of the computer. Tiling works off the screen as the space of possibility, and encourages you to act within it. The tiles in a tiling window manager are like additional screens (the recursive nature of it feels very computer-y to me): here is a rectangular area that you can fill with programs as you see fit (as they fit).</p>
<p>A lot of designs make use of an &ldquo;offscreen&rdquo; metaphor borrowed from the physical world, where you can swipe to see different applications. Mobile design is full of these. I think the offscreen metaphor can be useful. But I think it&rsquo;s also useful to go the other direction and not pretend. In i3wm you have multiple desktop spaces, but (by default) there&rsquo;s no swiping transitions between them. Each numbered workspace is just a space that can be immediately switched to, the same goes for the applications within the space. For me, it makes the computer feel more tool-like. I feel like we have a more honest relationship. An additional benefit, is that because there are no complex transitions you aren&rsquo;t distracted by the occasional transition failure or interruption.</p>
<h2 id="stumbling-blocks-the-tree">Stumbling blocks: the tree</h2>
<p>I find the initial divvying up of a tiling layout to be pretty intuitive. It is making changes to that initial layout that can be confusing. The reason for this confusion is the tree data structure that underlies layout. Specifically, it is the discrepancy between the actual layout structure and how that structure appears on the screen: sometimes movements that look like they should behave the same act differently due to the underlying structure. The easiest way to demonstrate this is looking at a layout split into four equal sections:</p>
<h3 id="the-quad-dilemma">The quad dilemma</h3>
<figure>
    <img src="/images/gif-2020-09-22_12-01-29-1600790561.gif"/> <figcaption>
            <h4>How a tile can be moved depends on its relationship to its parent container.</h4>
        </figcaption>
</figure>

<p>Let&rsquo;s look at an example where the layout has been split into four equal sections, the underlying tree structure for this layout is:</p>
<pre><code>- Root - horizontal layout
  - Container 1 - vertical layout
    - Tile 1
    - Tile 2
  - Container 2 - vertical layout
    - Tile 3
    - Tile 4
</code></pre><p>In tile (as in i3wm) you can move existing tiles using <code>shift</code> and the arrow keys. If you want to swap Tile 1 and Tile 2 you can move Tile 1 with <code>shift + ↓</code> for a swap. The issue comes when you want to swap Tile 1 and Tile 3. It looks like you should just be able to move Tile 1 with <code>shift + →</code> and swap it with Tile 3, but because of the tree data structure (and choices I made in the movement logic), the first movement changes the orientation of the Container 1 split, pressing it again moves it out of Container 1, resulting in:</p>
<pre><code>- Root - horizontal layout
  - Tile 1
  - Tile 2
  - Container 2 - vertical layout
    - Tile 3
    - Tile 4
</code></pre><p>Tile 3 has popped out of Container 1 and now you have a three across horizontal layout. If you press <code>shift + →</code> again you are presented with a choice, do you want to move Tile 1 next to Tile 3 or Tile 4? Choosing Tile 3 results in this structure:</p>
<pre><code>- Root - horizontal layout
  - Tile 2
  - Container 2 - vertical layout
    - Container 3 - horizontal layout
      - Tile 1 
      - Tile 3
    - Tile 4
</code></pre><p>To achieve the original swap you can move the cursor to Tile 3 and repeat the steps in reverse (press <code>shift + ←</code> several times). Until you achieve the swap:</p>
<pre><code>- Root - horizontal layout
  - Container 4 - vertical layout
    - Tile 3
    - Tile 2
  - Container 2 -vertical layout
    - Tile 1 
    - Tile 4
</code></pre><p>So a swap in the vertical rejection requires only one keypress, while a horizontal swap requires 8+. The reason for the difference is &ldquo;logical&rdquo; in that it reflects the underlying tree data structure. I try to give a hint about that structure by giving the parent container a wider gray background in Tile. It helps as a hint, but the movement effects can still surprise you if you don&rsquo;t have the structure in mind. I think this unpredictable movement is the biggest obstacle in getting used to a tiling layout. I tried some strategies to overcome it in Tile. I believe those strategies help but I still wonder if there isn&rsquo;t some other solution that could make things even more intuitive.</p>
<h3 id="why-does-it-have-to-be-a-tree">Why does it have to be a tree?</h3>
<p>If the mismatch between the tree layout and the user&rsquo;s mental model is the major stumbling block in moving and changing content in a tile layout can we switch out the tree structure? I thought hard about this for a while, and my conclusion was&hellip; no. I&rsquo;d certainly be interested to see any tiling layout experiments that use a different structure (some tiling window managers do use a &ldquo;list&rdquo; structure instead, where the layout is almost completely automated, but I wanted something where you could manually adjust the layout).</p>
<figure>
    <img src="/images/gif-2020-09-22_12-05-49-1600790881.gif"/> <figcaption>
            <h4>The tree structure also determines how a tile can be resized. It ensures that there are no gaps between tiles.</h4>
        </figcaption>
</figure>

<p>So what does a tree layout get us and why is it hard to replace? The simplest example I came up with to demonstrate its value is resizing children. Like moving a tile, resizing acts differently depending upon the relationship of the tile to the parent. If we look at the same quad again, we see that if you resize vertically it behaves as you would expect, the selected tile takes space from its vertical neighbor. If you resize horizontally, because the parent is vertical, it resizes the parent, taking space from the neighboring horizontal parent.</p>
<p>What if the tiles weren&rsquo;t constrained by the relationship to parents. You could imagine that resizing horizontally would instead act the same as vertically, taking space only from the neighboring tile. I&rsquo;m not sure exactly how that data structure would work, maybe instead of reworking the data structure you&rsquo;d just change the resize logic, so that operated more like collision detection on whatever was visually near. But here&rsquo;s the conceptual issue I ran into: Say you resize Tile 1 so it is vertically shorter, than you make it wider, if you try and go tile by tile, it would push only the horizontally neighboring tile and you would be left with a gap in the middle, between the bottom right corner of Tile 1 and Tile 4 below it. The tree parent relationship ensures these gaps don&rsquo;t exist, and that is why it is necessary, even if it causes issues with our mental models.</p>
<p>(I do still wonder if you could do something like a tree layout that reconfigured on the fly. Where it looked at the visual arrangement, and if it was such that it wouldn&rsquo;t cause a gap, it would modify the structure so that resizing would perform more like you visually expect. There would be &lsquo;tracks&rsquo; that resize could travel along. I still haven&rsquo;t decided if that approach is really viable, it would, at the least, require a lot of edge-case handling.)</p>
<h2 id="my-movement-philosophy">My movement philosophy</h2>
<p>I did try and implement some logic that would make movement for the user more intuitive. As far as cursor (not tile) movement, I look exclusively at the on-screen position of the tile, so that <code>→</code> moves to the neighbor tile to the right that contains the <code>y</code> coordinate of the current tile (regardless of how many parent containers are involved). This differs from i3wm where moving to a container focuses the last active tile, a convention that has a logic to it but still feels unpredictable to me. My approach does create a default favortism to tiles that are nearer the left and the top (because I look for something that contains the top or left position).</p>
<p>The cursor movement approach of looking at the rendered position of the tiles also complicates the code logic a bit. It causes a kind of divergent logic between the movement and data structure. I think it was the right choice here, but it is a trade-off, and I still think about whether some approach couldn&rsquo;t avoid the divergence altogether.</p>
<p>The cursor movement is also just generally easier to reason about because you&rsquo;re moving within a static layout. When you move the tile itself you&rsquo;re altering the layout and, as demonstrated in the quad example above, things get much more complicated very quickly. One question that might be lingering from the quad example: for cases like the horizontal swap, why not build special logic to swap immediately without going through the intermediate steps? The answer is that if I aggressively tried to predict and fulfill any swap intentions, I would prevent the user from having access to all possible layouts. In the quad example, the second <code>shift + →</code> actions moves Tile 1 out of the container and create a 3-across grid. If I instead tried to guess you wanted to swap Tile 1 and Tile 2 there would not be a way to access that 3-across layout. In all the movement options, I tried to create a balance between smoothing the way for the user and making sure I wasn&rsquo;t over-predicting their intentions.</p>
<p>Another interesting thing you can see in the swap example is that movement in and out of parents is not exactly symmetrical. The first move changes Container 1&rsquo;s orientation to horizontal, the second moves Tile 1 out of the container. If things were symmetrical the next move would move Tile 1 into Container 2 in a new horizontal container, like this:</p>
<pre><code>- Root - horizontal layout
  - Tile 2
  - Container 2 - horizontal layout
    - Tile 1
    - Container 3 - vertical layout
      - Tile 3
      - Tile 4
</code></pre><p>Instead, I assume you want to move into one of the children (Tile 3 or Tile 4) and give you a choice between them. The choose-a-child mechanism was a late addition to the layout, and one I&rsquo;m quite pleased with. Usually I try and avoid intermediate choice steps, instead preferring immediate feedback and easy reversibility, but I found that being able to choose the child to join cut down the steps in moving tiles between parents in a way that I rarely found annoying or frustrating. The idea is that when you&rsquo;re moving a tile towards a parent with lots of nested children, you&rsquo;re actually trying to move it within those children, where if you&rsquo;re moving a child towards the edge of its current parent, you&rsquo;re trying to move it out. It does rely on some prediction of the user&rsquo;s intentions which I try to stay away from it, but it felt like the right solution in this case. There were a lot of trade-offs like that in this project, which made it both interesting and stressful.</p>
<figure>
    <img src="/images/gif-2020-09-22_12-09-24-1600791027.gif"/> <figcaption>
            <h4>Choosing which child to move into and then backing back out.</h4>
        </figcaption>
</figure>

<h2 id="deciding-on-splits">Deciding on splits</h2>
<p>Closely related to the tile movement trade-offs, is the issue of how I decide how a container is split. In i3wm you have to set whether to do a horizontal or vertical split. This has the virtue of being clearly understandable logic, but when you do multiple successive splits it feels unintuitive &ndash; it slices it up into smaller and smaller vertical or horizontal strips. It turns out what you actually (usually) want is for the split to be as evenly as possible. I use an <a href="https://github.com/nwg-piotr/autotiling">autotiling script for i3</a>, that looks at the tile dimensions and splits against the larger dimension. As mentioned above, I&rsquo;m usually against &lsquo;mgical/algorithmic prediction in software, but I was impressed how &ldquo;correct&rdquo; this simple split prediction felt in almost all settings.</p>
<figure>
    <img src="/images/gif-2020-09-22_12-14-02-1600791277.gif"/> <figcaption>
            <h4>Tiles are split on their longest dimension.</h4>
        </figcaption>
</figure>

<p>I implemented the same dimension-based split logic in tile, and it feels right to me there as well. Another approach would have been to add different key combos to splitting horizontally and vertically. I love the simplicity of <code>enter</code> being the one and only mechanism for splitting, though. I think it encourages the user to split first and adjust the layout after (if they actually wanted the opposite split then it is one tile move away).</p>
<h2 id="image-specific-adjustments">Image-specific adjustments</h2>
<p>Most of the decisions I made could apply to either a tiling window manager or a tiling image assembler. But some things are specific to Tile because it deals with images. One late change that made Tile more interesting, was copying the image when a tile is split. This decision creates a forking, multiplying effect as you split tiles that is fun and interesting. It wouldn&rsquo;t apply in a window manager because there you generally choose the application as you open the new space.</p>
<figure>
    <img src="/images/gif-2020-09-22_12-19-12-1600791606.gif"/> <figcaption>
            <h4>Image fill types include: stretch, contain, and cover.</h4>
        </figcaption>
</figure>

<p>Another image specific decision was deciding on the default image fill-type. The default image fill-type is stretch, where the image is stretched over the dimensions of the tile. Stretch does not respect the image&rsquo;s original aspect ratio. The other two fills, contain and cover, do. Stretch is probably an unusual default choice, because it distorts the original image, but I thought it was the most interesting.</p>
<h2 id="where-to-next">Where to next</h2>
<p><a href="https://tile.constraint.systems">Tile</a> was an opportunity for me to explore tiling layout logic, something I plan to continue to experiment with. A lot of the Constraint Systems experiments work from the &ldquo;inside-out&rdquo; with a cursor inside of a grid. Tiling gives me another method of navigating and partitioning space, either to explore on its own or in combination with the grid-cursor. I&rsquo;d like to continue to refine the code logic for the tile layout and movement, hopefully condensing it down into something that I can drop in across projects.</p>
</div>
        <div><a href="/posts/2020-09-16-tile-release-notes/">Permalink</a></div>
        <div class="spacer"></div>
        <hr />
        <div class="spacer"></div>
      </div>
      
      
      <div class="post">
        <div class="jbm">2020.09.12</div>
        <h1><a href="/posts/2020-09-12-the-benefits-of-limitations-in-application-launchers/">The benefits of limitations in application launchers</a></h1>
        <div><p>In my Linux set-up, I use dmenu as an application launcher. dmenu is basically autocomplete for applications and scripts. In many ways, it&rsquo;s not so different from launching things using Spotlight on a Mac.</p>
<figure>
    <img src="/images/gif-2020-09-12_12-47-07-1599929297.gif"/> <figcaption>
            <h4>Opening 750words.com with dmenu and a launcher script.</h4>
        </figcaption>
</figure>

<p>Since I started using it, dmenu has been a convenient way to launch apps. But I&rsquo;ve only recently started to realize some of the interesting things it makes possible. A lot of the possibilities come down to the limitations of the interface, and how agnostic it is about what it launches.</p>
<p>Lately, I&rsquo;ve started putting scripts to run apps, or a combination of apps, or a combination of apps and websites and terminals, in my <code>.local/bin</code> folder where they are exposed through dmenu. Some of the things I&rsquo;ve added:</p>
<ul>
<li><code>planner</code> launches my calendar, personal email, and work email all in different firefox windows.</li>
<li><code>750words</code> launches <a href="https://750words.com/">https://750words.com/</a> in a new firefox window.</li>
<li><code>blog</code> launches a terminal set to my blog directory, a terminal window running <code>npm run dev</code> to run the local versions, and a firefox window open to localhost.</li>
<li><code>record</code> starts a screen recording. <code>gif_2x</code> converts the last screen recording into a GIF running at 2x speed. When it&rsquo;s done it opens a window showing the GIF and listing the file size.</li>
</ul>
<p>Some of these are rather involved scripts, some are very simple. What I&rsquo;ve been surprised by is how different even the simple ones feel when launched from the application launcher. Something like <code>750words</code> is given its own space and weight as an activity, promoted from being a website I visit among other websites. It also makes my intention going in very clear, if I open <code>750words</code> my intention is to do it, versus getting lost browsing (even though, functionally, all it is doing is opening <code>750words</code> in a web browser).</p>
<p>I used to go after the same effect on macOS, especially for web applications. There were several programs that would let you run a website within its own application container. That meant you could launch it from Spotlight. There were always rough edges that made clear it was a bit of a hack though. The difference between the wrapped web apps and the true apps was noticeable. This is partly because apps on macOS are expected to be polished, with their own nice-looking icon.</p>
<p><strong>The lesson I&rsquo;m interested in with dmenu, is how the limitations (an application is only a name among names) make it much easier and more satisfying to add user-configured applications and scripts.</strong> I am surprised by how different it feels to have my scripts sit right alongside the other applications. As with my experience of lots of Linux-related stuff, it is a feeling of empowerment. It feels like a level of customization above what I&rsquo;m used to, computer as tool I am control of, rather than something I&rsquo;m wrestling with.</p>
<h2 id="content-limitations-in-web-previews">Content limitations in web previews</h2>
<p>I&rsquo;ve noticed a similar effect in making websites. Often you end up making a website that you want to display a preview of on another website. I do this on <a href="https://constraint.systems">Constraint Systems</a> and for the <a href="https://blog.fastforwardlabs.com/prototypes">Cloudera Fast Forward prototypes</a>. Through experience, I&rsquo;ve learned you want to make the number of assets needed for the list preview as few as possible. In the case of Constraint Systems, it is a tile, a description, a preview image, and a preview GIF. It is tempting to require more elements (like several preview images) to provide a fancier preview. Whatever you require, however, you&rsquo;re going to have to provide for every link going forward. A surprising amount of friction can come from needing to create preview assets (and also the deploy process for those assets). Enough friction to cause you to make fewer tools or blog posts because you&rsquo;re dreading that part of the process.</p>
<p>Website meta tags have been an interesting development in relation to this. Used for creating previews on shared Twitter and Facebook links, the main meta tags are limited enough (title, description, preview image) that they&rsquo;re worth doing, and now that they&rsquo;re being regularly done across sites, even more services can dependably use them to unfurl links.</p>
</div>
        <div><a href="/posts/2020-09-12-the-benefits-of-limitations-in-application-launchers/">Permalink</a></div>
        <div class="spacer"></div>
        <hr />
        <div class="spacer"></div>
      </div>
      
      
      <div class="post">
        <div class="jbm">2020.09.01</div>
        <h1><a href="/posts/2020-09-01-sift-release-notes/">Sift: release notes</a></h1>
        <div><p><img src="/images/sift-1599052864.gif" alt=""></p>
<p><a href="https://sift.constraint.systems">Sift</a> is an experimental image editor that slices an image into layers. You can offset the layers to produce interference patterns and pseudo-3D effects. It uses an additive blending mode and pixel-based light splitting algorithm.</p>
<h2 id="origins">Origins</h2>
<p>I started planning Sift while standing in the ocean, thinking about waves and how to use a wave effect on the pixels of an image. I&rsquo;ve gotten used to thinking of images as a grid of pixels, and I&rsquo;ve done some experiments using HTML canvas and javascript to move, or even flow, pixels around. I started trying to imagine how pixels could cycle &ldquo;below the surface&rdquo; and then pop up on top.</p>
<p>For a wave effect I needed pixel depth. I needed to figure out a way to transform an array of pixels from 2D into 3D. I thought about RGB values. Coud I use the color value as the third dimension by using it to make a pixel stack? What if for a pixel with a red value of 100 I stacked 100 red pixels?</p>
<p>I ended up using the pixel stack idea (and cutting the wave idea, for now), but I had to get the right blending mode and slicing algorithm to get things working.</p>
<h2 id="slicing-colors">Slicing colors</h2>
<p>One of the issues with making pixel-specific stacks was that a pixel doesn&rsquo;t have just one color value, it has three (red, green, and blue). I decided to put the &ldquo;brightest combo&rdquo; at the top. So for an RGB value of <code>[10,16,24]</code> I would start the stack with 10 <code>[1,1,1]</code> pixels. Then <code>16 - 10 = 6</code> for 6 <code>[0,1,1]</code> pixels, and, finally, <code>24 - 16 = 8</code> for 8 <code>[0,0,1]</code> pixels. This means the white-ish pixels are on top, and then, as those are finished, you see a kind of exhaust trail of color.</p>
<p>(For performance reasons, the finished app bins values according to the number of layers. So instead of 192 stacked <code>[1,1,1]</code> pixels for a <code>[192,192,192]</code> value, a 16 layer edit in Sift bins <code>192 / 16 = 12</code>, for 12 <code>[16,16,16]</code> pixels.)</p>
<h2 id="blend-mode">Blend mode</h2>
<figure>
<img src="/images/sift-logo-1599052499.png" 
style="max-width: 256px;" />
<figcaption>Overlapping red, green, and blue squares in additive blend mode.</figcaption>
</figure>
<p>The color slicing only works with right blend mode, where each layer&rsquo;s RGB value is added together. For canvas, the blend setting is called <code>globalCompositeOperation</code> and the value for additive blending is <code>lighter</code>.</p>
<p>Additive blending, while not what I&rsquo;m used to working with for computers, is actually how our eyes perceive light. I vaguely knew this, but it&rsquo;s been fun to play with it in the app and get a real feel for the consequences.</p>
<h2 id="layers-and-offsets">Layers and offsets</h2>
<p>Originally, I thought I&rsquo;d build this app in Three.js, where you could rotate around the pixel (actually voxel) stacks in 3D. I thought maybe I could get the perspective such that it appeared a whole image at the start, but as you zoomed in you could see cracks between. I&rsquo;m still not totally sure if the math for that could be worked out. But I quickly ran into performance issues from trying to render even binned values for every pixel in an image, so I switched over to HTML canvas. (I&rsquo;m sure there are ways to do this in Three.js, possibly utilizing shaders? If you have ideas let me know.)</p>
<p>I knew performance might be a struggle in canvas as well, but I had a plan. I know canvas can redraw image files (with <code>drawImage()</code>) quickly. On image load I split the image into a set number of layers (16 by default), doing all the bin calculations. The render function (peformed whenever the x and y offsets are changed) then just draws those layer images on top of one another and the blend mode takes care of the rest.</p>
<h2 id="the-result">The result</h2>
<p>Sometimes I have specific goals for <a href="https://constraint.systems">Constraint Systems</a> projects, other times I just follow an effect to its end. Other than the &ldquo;stack&rdquo; idea, I didn&rsquo;t really have a goal for what Sift should make images into. I was pleasantly surprised by the early results, right after I flipped the blend mode switch. For certain images, it produces a pseudo-3d effect. <a href="https://twitter.com/the_ezekiel/status/1299095952339410945">Ezekial suggested it&rsquo;s like an aerogel</a>. It is also kind of like badly calibrated color separation in a TV (but different because of how it is stacked). Other images you can get kind of an otherwordly thing. I watched <em>Twin Peaks: The Return</em> recently and it reminded of me some of the face distortions from that.</p>
<h2 id="future-experiments">Future experiments</h2>
<p>I&rsquo;m definitely intrigued by the possibilities of additive blending. Partly due to <a href="https://twitter.com/tylerangert/status/1299163673424879617">Tyler&rsquo;s suggestion</a>, I want to try layering video frames on top of each other using a similar process.</p>
<h2 id="larger-goals">Larger goals</h2>
<p>One of the goals of the Constraint Systems projects is to get really used to thinking of images as a collection of pixels, and work &ldquo;with the grain&rdquo; of how computers store images. I think the stacking and layer ideas are good signs that that part of the project is working. My intuition for what might produce interesting image results has gotten better. The mix of having a good idea of what I wanted but not being sure of the final effect is a fun one &ndash; it feels like a collaboration with the computer.</p>
</div>
        <div><a href="/posts/2020-09-01-sift-release-notes/">Permalink</a></div>
        <div class="spacer"></div>
        <hr />
        <div class="spacer"></div>
      </div>
      
      
      <div class="post">
        <div class="jbm">2020.08.20</div>
        <h1><a href="/posts/2020-08-20-fantasy-consoles-and-framing/">Fantasy consoles and framing</a></h1>
        <div><p>I&rsquo;ve been thinking a lot about <a href="https://www.lexaloffle.com/bbs/?tid=31634">Joseph White&rsquo;s talk on his motivations for making the PICO-8 fantasy console</a>. There&rsquo;s so much in the talk that resonates with what I&rsquo;ve been thinking about for <a href="https://constraint.systems">Constraint Systems</a>: about how carefully selected constraints change the feel of working, making it feel more focused, and even cozy.</p>
<p>Since viewing the talk I&rsquo;ve been thinking a lot about how he frames PICO-8 with the idea of a fantasy console and cartridges, and what I could do for framing Constraint Systems. I&rsquo;ve toyed with the idea of making the Constraint Systems homepage into a simulation of a fantasy operating system with each experiment as an application. Part of the feeling I want to capture is going to the middle school computer lab in the mid 90s and trying out the strange collection of software the school had preloaded (even though the variety of the internet is great, there is something comforting and cozy in the idea of a finite number of programs to explore).</p>
<p>I had been thinking of the operating system metaphor as a fun, possibly attention-attracting, thing, that I should get around to sometime. After viewing White&rsquo;s talk, however, I think it&rsquo;s something I should prioritize. Framing Constraint Systems as a fantasy computer/operating system could (done well) communicate my vision of the project, and communicate it not in a long text somebody has to read, but as a general vibe. In the best case, they would &ldquo;get&rdquo; the project just by looking at the homepage. This is what &ldquo;branding&rdquo; is, I suppose, it just feels more tied to the core of the project here than I&rsquo;m used to thinking of it.</p>
<p>Extensions of the idea:</p>
<ul>
<li>The simplest version is just presenting the Constraint System experiments as different apps on a fantasy operating system. I could also try and make them behave as apps. Possibly using iframes and a tiling window management system. A further step (that I&rsquo;ve always wanted to do) would be to let you pipe the output of one application into another.</li>
<li>Picking up on the middle school computer lab vibe, I wonder if Constraint Systems could someday be a physical computer lab, where computers limited to only CS software are available free for anyone to use, and I administer the lab and get to see what people make and can adjust or make new applications based on what people are doing with it. (I think this is at least a good idea for an installation or area at a hackerspace.)</li>
</ul>
</div>
        <div><a href="/posts/2020-08-20-fantasy-consoles-and-framing/">Permalink</a></div>
        <div class="spacer"></div>
        <hr />
        <div class="spacer"></div>
      </div>
      
      
      <div class="post">
        <div class="jbm">2020.07.30</div>
        <h1><a href="/posts/2020-07-30-automadraw/">Automadraw: release notes</a></h1>
        <div><figure>
    <img src="/images/automadraw-1596131469.gif"/> 
</figure>

<p><a href="https://automadraw.constraint.systems">Automadraw</a> is a new experimental app I made for my <a href="https://constraint.systems">Constraint Systems</a> project. It lets you draw and evolve your drawing using cellular automata using two keyboard controlled cursors.</p>
<h2 id="what-is-it-for">What is it for</h2>
<p>I think there are two main uses for Automadraw:</p>
<ol>
<li>Get more familiar with the cellular automata (Conway&rsquo;s Game of Life and Langton&rsquo;s Ant) that it runs. You can quickly experiment with lots of different patterns.</li>
<li>Draw something collaboratively with the automata. The interaction design aims to make working with the automata intuitive. These design techniques (two cursors, keyboard controls) could be applied to a wide range of creative apps.</li>
</ol>
<h2 id="two-cursors">Two cursors</h2>
<p>I had originally planned to use just one cursor, and have it shift between draw mode and &ldquo;act&rdquo; (run automata) mode. As I experimented I found that usually for act mode I wanted to cover a large area and draw mode a smaller one. Having to resize when switching between modes ruined the flow, so I split the cursors up.</p>
<p>Splitting them up opened up some new possibilities. I realized I could set it up so that I could use each cursor&rsquo;s actions (draw or act, respectively) regardless of which one was in focus. This set up a couple of interactions I really liked:</p>
<figure>
    <img src="/images/gif-2020-07-30_13-53-52@2x-1596131748.gif"/> <figcaption>
            <h4>Sweeping: draw some lines then use a long, narrow act cursor to sweep over the lines, running Game of Life over each sweep step. This usually produces intricate symmetrical designs that really feel like they&#39;re evolving through each sweep.</h4>
        </figcaption>
</figure>

<figure>
    <img src="/images/gif-2020-07-30_13-58-43@2x-1596132012.gif"/> <figcaption>
            <h4>Active environment: resize the act cursor over a large area, use the draw cursor and have it move in and out of the act area as the automata is run. The act area becomes an environment where different rules apply. It feels like a physics or chemistry simulation.</h4>
        </figcaption>
</figure>

<p>This set-up is uniquely suited to keyboard cursor controls, where each cursor&rsquo;s position is fully visible and fully predictable (versus a touch interface where you would have to use multiple fingers and the fingers themselves would obscure your view of the changes taking place). I use Vim-like keyboard controls because I honestly prefer them. My suspicion is that they may enable modes of interaction other methods do not. I was happy to find an interaction that fit them so well. I&rsquo;m looking forward to seeing how even more multiple cursors feel in future experiments.</p>
<p><a href="https://stamp.constraint.systems">Stamp</a> is a different example of the possibilities of multiple cursors: two cursors across two canvases.</p>
<p><img src="/images/stamp-1596133133.gif" alt=""></p>
<h2 id="keyboard-events">Keyboard events</h2>
<p>Part of the reason the two cursor interaction is interesting is because of an accident of keyboard event handling. A lot of the Constraint System experiments let you hold down multiple keys. This is tricky to handle in Javascript for everything except modifier keys. The main issue is that if you&rsquo;re holding down one key, and start holding an additional one, the new one will take over the <code>keyDown</code> event. The solution is to make a keymap object, store each key on <code>keyDown</code> and remove it on on <code>keyUp</code>. You then use the keymap object for the source of truth about what is pressed on each <code>keyDown</code> event.</p>
<p>This technique mostly just works, but there turns out to be an issue, arguably a bug, that makes things like the &ldquo;sweep&rdquo; technique I discussed above possible. If you are pressing one key, add another key, then let up on the second key, <code>keyDown</code> events stop firing. For Automadraw, this behavior enables this interaction:</p>
<ul>
<li>Hold down &lsquo;a&rsquo; to run automata, press a direction key to move the act cursor. When you let up on the direction key the automata will pause running&hellip; until you press a direction key again. Using this technique you can run &ldquo;sweeps&rdquo;, moving the act cursor across a set of pixels, automatically running the automata once each step.</li>
</ul>
<p>This interaction was a happy accident, and I&rsquo;m looking forward to thinking about how to expand and support it more in future experiments.</p>
<h2 id="limitations-and-future-possiblities">Limitations and future possiblities</h2>
<p>I had been wanting to experiment with cellular automata and a drawing app for a long time. For this experiment, I needed to really scope things down in order to get started. I restricted the drawing app colors to 1-bit (on or off). This usefully limited the number of cellular automata I could use and the number of interactions I needed to support. I also made the app &lsquo;pixels&rsquo; large, at 16 actual pixels. This makes drawing quick and the automata actions more legible, but also restricts the fidelity of the final image. Someday I would like to build a cellular automata app more focused on image editing, where you could evolve parts of an image at a higher fidelity. That would also involve using automata that use color information, there are some interesting examples of those in <a href="https://www.youtube.com/watch?v=lyZUzakG3bE">this CA Lab demo video</a>.</p>
<h2 id="code">Code</h2>
<p>The code for Automadraw is <a href="https://github.com/constraint-systems/automadraw">avaliable on github</a>.</p>
<h3 id="slowly-recreating-react">Slowly recreating React</h3>
<p>I built the early Constraint Systems experiments using React, but have moved off of it to vanilla Javascript for the most recent ones. I do find myself recreating a lot of the set-up of React. I&rsquo;ve found out firsthand that a lot of the React boilerplate I questioned is in there to work around the constraints of Javascript itself. I may switch back to React sometime, but right now I&rsquo;m still enjoying experimenting on my own. It is also true that a lot of the benefits of React don&rsquo;t mesh well with HTML canvas, which is where most of the action for this app takes place.</p>
<h3 id="es6-modules">ES6 modules</h3>
<p>This was the first project where I used ES6 modules. It was nice to be able to organize the code into sections like <code>keyboard</code> and <code>state</code>. I&rsquo;ll continue to use them and refine my organization going forward. Maybe someday I&rsquo;ll have a true base starter kit I can reuse across projects.</p>
<h3 id="canvas-compositing">Canvas compositing</h3>
<p>One switch I&rsquo;ve made that I&rsquo;ve been very happy with, is moving from rendering multiple canvas DOM elements on top of eachother, to placing only one canvas on the dom and compositing the different layers (in this case: <code>cursor</code>, <code>grid</code>, <code>art</code>) on to the DOM layer for each render. My rendering code is a little knotty, but it still feels a lot cleaner than stacking the canvases in the DOM.</p>
</div>
        <div><a href="/posts/2020-07-30-automadraw/">Permalink</a></div>
        <div class="spacer"></div>
        <hr />
        <div class="spacer"></div>
      </div>
      
      
      <div class="post">
        <div class="jbm">2020.07.28</div>
        <h1><a href="/posts/2020-07-28-bushido-blade-2-a-design-appreciation/">Bushido Blade 2: a design appreciation</a></h1>
        <div><p>Bushido Blade 2 was a Playstation game I played a lot in high school. It was a fighting game with swords, and its main hook was that instead of health bars, damage was based on where you struck your opponent. You could injure limbs or finish the an opponent with one strike if you hit the right spot.</p>
<p><img src="/images/bushido-blade-2-1595969059.jpg" alt=""></p>
<p>Design-wise, Bushido Blade rethought the premise of a fighting game from first principles. I love what this approach allowed them to do in terms of immersion: during a fight, nothing is visible on the screen except the two characters.</p>
<p>This is what I want to do when I design something: communicate everything through the core action. Design things so well that you don&rsquo;t need to bring in health bars and labels.</p>
<p>Bushido Blade 2, like most of the games I played, was well-reviewed but never really that popular. I remember it having a pretty good story-mode with fun voice acting.</p>
</div>
        <div><a href="/posts/2020-07-28-bushido-blade-2-a-design-appreciation/">Permalink</a></div>
        <div class="spacer"></div>
        <hr />
        <div class="spacer"></div>
      </div>
      
      
      <div class="post">
        <div class="jbm">2020.07.12</div>
        <h1><a href="/posts/2020-07-12-swapping-color-schemes-across-all-terminals-and-vim-with-pywal-and-base16/">Swapping color schemes across all terminals and Vim with Pywal and Base16</a></h1>
        <div><figure>
    <img src="/images/gif-2020-07-11_08-51-21@2x-1594472001.gif"/> <figcaption>
            <h4>Switching between light and dark colorschemes in all terminals using a hotkey.</h4>
        </figcaption>
</figure>

<p>I recently got instant light and dark color scheme toggle working for all open terminals, including those running Vim. I used a combination of techniques from <a href="https://github.com/dylanaraps/pywal">Pywal</a> and <a href="https://github.com/chriskempson/base16-shell">Base16 shell</a>, and learned some things about scripting in Linux and escape sequences along the way.</p>
<h2 id="pywal">Pywal</h2>
<p><a href="https://github.com/dylanaraps/pywal">Pywal</a> is a package for switching color schemes system wide. Mostly it is known for generating those color schemes from images, but it also comes bundled with a bunch of predefined themes. I wanted to use it to switch between <a href="https://github.com/morhetz/gruvbox">gruvbox</a> light and dark themes.</p>
<p>Pywal can change the color schemes for all open terminals automatically. It can also switch colors for several other Linux applications.</p>
<h3 id="how-pywal-works">How Pywal works</h3>
<p>This is what the gruvbox dark theme looks like in Pywal&rsquo;s colorschemes directory:</p>
<pre><code># Pywal gruvbox colorscheme
{
  &quot;special&quot;: {
    &quot;background&quot;: &quot;#282828&quot;,
    &quot;foreground&quot;: &quot;#a89984&quot;,
    &quot;cursor&quot;: &quot;#ebdbb2&quot;
  },
  &quot;colors&quot;: {
    &quot;color0&quot;: &quot;#282828&quot;,
    &quot;color1&quot;: &quot;#cc241d&quot;,
    &quot;color2&quot;: &quot;#d79921&quot;,
    &quot;color3&quot;: &quot;#b58900&quot;,
    &quot;color4&quot;: &quot;#458588&quot;,
    &quot;color5&quot;: &quot;#b16286&quot;,
    &quot;color6&quot;: &quot;#689d6a&quot;,
    &quot;color7&quot;: &quot;#a89984&quot;,
    &quot;color8&quot;: &quot;#928374&quot;,
    &quot;color9&quot;: &quot;#cc241d&quot;,
    &quot;color10&quot;: &quot;#d79921&quot;,
    &quot;color11&quot;: &quot;#b58900&quot;,
    &quot;color12&quot;: &quot;#458588&quot;,
    &quot;color13&quot;: &quot;#b16286&quot;,
    &quot;color14&quot;: &quot;#689d6a&quot;,
    &quot;color15&quot;: &quot;#a89984&quot;
  }
}
</code></pre><p>A JSON file declaring each color. OK, but how do those colors get communicated to the applications? The <a href="https://github.com/dylanaraps/pywal/wiki/Customization">customization</a> instructions mention <code>~/.cache/wal</code> a lot, so let&rsquo;s see what&rsquo;s in there:</p>
<pre><code># ls ~/.cache/wal
colors                      colors-putty.reg         colors-tty.sh        colors.Xresources
colors.css                  colors-rofi-dark.rasi    colors-wal-dmenu.h   colors.yml
colors.hs                   colors-rofi-light.rasi   colors-wal-dwm.h     sequences
colors.json                 colors.scss              colors-wal-st.h      wal
colors-kitty.conf           colors.sh                colors-wal-tabbed.h
colors-konsole.colorscheme  colors-speedcrunch.json  colors-wal.vim
colors-oomox                colors-sway              colors-waybar.css
</code></pre><p>Ah! It&rsquo;s using the JSON color schemes to generate application specific color scheme files. This is  a great example of figuring out which level of abstraction to intervene at: Pywal defines a standard color scheme spec and uses application specific templates to generate files from it. If anyone wants to add a new color scheme or application template the procedure for doing so is clear and self-contained.</p>
<h3 id="live-reload-and-escape-sequences">Live reload and escape sequences</h3>
<p>To change color schemes in most applications, Pywal builds the color config file and sends a message to the application to reload. For terminals, it does something different. It uses <a href="https://en.wikipedia.org/wiki/ANSI_escape_code">ANSI escape codes</a>, invisible character sequences that give a terminal color and formatting instructions, to instantly swap out the colors.</p>
<p>You can see how this works in Pywal&rsquo;s <a href="https://github.com/dylanaraps/pywal/blob/master/pywal/sequences.py">sequences.py</a>. The conversion from the JSON hex color to the terminal readable escape sequence is here:</p>
<pre><code># from pywal/sequences.py
def set_color(index, color):
    &quot;&quot;&quot;Convert a hex color to a text color sequence.&quot;&quot;&quot;
    if OS == &quot;Darwin&quot; and index &lt; 20:
        return &quot;\033]P%1x%s\033\\&quot; % (index, color.strip(&quot;#&quot;))

    return &quot;\033]4;%s;%s\033\\&quot; % (index, color)
</code></pre><p>Escape sequences, which I&rsquo;ve only seen otherwise in terminal prompt customizations, are not easy to parse or write for a human, but as part of a script they&rsquo;re a powerful way to achieve instant terminal color palette swaps. I don&rsquo;t think anyone would design an API featuring anything like escape sequences today, but in this case they make for a much smoother experience than a &ldquo;change config and reload&rdquo; cycle.</p>
<p>Now let&rsquo;s look at how the escape sequences get sent to the terminal:</p>
<pre><code># from pywal/sequences.py
def send(colors, cache_dir=CACHE_DIR, to_send=True, vte_fix=False):
    &quot;&quot;&quot;Send colors to all open terminals.&quot;&quot;&quot;
    if OS == &quot;Darwin&quot;:
        tty_pattern = &quot;/dev/ttys00[0-9]*&quot;

    else:
        tty_pattern = &quot;/dev/pts/[0-9]*&quot;

    sequences = create_sequences(colors, vte_fix)

    # Writing to &quot;/dev/pts/[0-9] lets you send data to open terminals.
    if to_send:
        for term in glob.glob(tty_pattern):
        util.save_file(sequences, term)

    util.save_file(sequences, os.path.join(cache_dir, &quot;sequences&quot;))
    logging.info(&quot;Set terminal colors.&quot;)
</code></pre><p>This shows the power of Unix&rsquo;s &ldquo;everything is a file&rdquo; approach. The script locates the file for each open terminal and writes the sequences directly to it (same as you would write to a text file). And it just works.</p>
<h3 id="vim-issues">Vim issues</h3>
<p>Pywal worked beautifully for me except for Vim. It may not be an issue depending on how your Vim and terminal color schemes are configured, but in my case to get the proper color scheme I needed to not only swap the terminal colors but also toggle the <code>background</code> setting in Vim between <code>light</code> and <code>dark</code>. I eventually got this working using <code>xdotool</code> to trigger a toggle hotkey in Vim, but it was not nearly as clean a process as the main <code>write directly to terminal</code> Pywal approach. So I went hunting for other solutions.</p>
<h2 id="base16">Base16</h2>
<p><a href="https://github.com/chriskempson/base16">Base16</a> is a standardized format for creating 16-color terminal color schemes. Those color schemes can then be combined with templates to produce color configurations for a wide range of applications. <a href="https://github.com/chriskempson/base16-shell">Base16 shell</a> is a set of scripts that converts those color schemes into escape sequences to be applied to terminals.</p>
<p>The main draw for me for Base16 was that their <a href="https://github.com/chriskempson/base16-vim">Vim package</a> lets you set a base Vim color scheme that works wonderfully with any Base16 terminal color scheme, no <code>background</code> setting change needed. (Pywal does also have a version of this, but I was much less impressed with the base Pywal Vim color scheme.)</p>
<h3 id="applying-base16-to-all-open-terminals">Applying Base16 to all open terminals</h3>
<p>Base16 shell, unlike Pywal, only applies the new color scheme to your current terminal. This set-up has its own interesting possibilities (different color schemes for terminals where you <code>ssh</code>ed; random color scheme for each new terminal) but I wanted the color scheme to be applied globally. So I frankensteined a bit of Pywal into the Base16 shell script:</p>
<pre><code># Modified Base16 shell script
...
terms=`ls /dev/pts/[0-9]*`
terms=&quot;${terms} $PWD/.cache/base16/sequences&quot;
for term in $terms
do
  # 16 color space
  put_template 0  $color00
  ...
done
...
</code></pre><p>I converted the Pywal <code>send</code> function into Bash, and wrapped the part of the shell script that sent the escape sequences. I also set it to save the sequences to a cache, to be run for each new terminal. This got me the exact terminal and Vim color swap I wanted. I set up a toggle script and assigned a hotkey using my window mananger <code>i3wm</code>. If I want to swap color palettes on other applications, I can add the necessary steps into the toggle script. I like knowing exactly what the toggle script is doing, vs. Pywal&rsquo;s &ldquo;we&rsquo;ll try and take care of everything we can&rdquo;.</p>
<figure>
    <img src="/images/gif-2020-07-11_08-51-21@2x-1594472001.gif"/> <figcaption>
            <h4>The final result.</h4>
        </figcaption>
</figure>

<p>I just modified the shell scripts for the specific gruvbox color schemes I wanted, but the cleaner way to do it would be to modify the shell template and regenerate them all. For now, I&rsquo;m happy I got everything working and learned more about escape sequences and the structure of the Linux file system in the process.</p>
<h2 id="lessons-learned">Lessons learned</h2>
<p>Part of why I&rsquo;m exploring Linux and scripting is to get a feel for how software could be more customizeable. A few things were especially interesting to me here:</p>
<ol>
<li>Writing to all open terminals is a great example of the power of &ldquo;everything is a file&rdquo;. Being able to locate all the open terminals and send the escape sequences to them through the file system interface shifted my mental model about scripting possibilities. I usually think of applications and files as very separate, and this blurred that a bit. I&rsquo;d seen people talk about the power of the file concept before but this is one of the first times its been useful for something I was trying to do. I will spend some time thinking about how the file system concept could be applied to the software I make.</li>
<li>Escape sequences. I&rsquo;m trying to think if you would ever want to include them (or a concept like them) in an application created from scratch. I don&rsquo;t think so. They&rsquo;re useful when you want to do formatting and the only interface you have with the program is that you can write text characters to it. The style is embedded in the text, but because the embedding is invisible it&rsquo;s going to be pretty unpredictable if you try and move it between programs.</li>
<li>The power of plain text and the being able to manipulate plain text. Lots of the config files for Linux applications are in a simple, plain text format. Coming from Javascript, I&rsquo;m more used to intaking data as JSON and doing the manipulation in Javascript. In Linux you&rsquo;re more likely to manipulate the text directly, and there&rsquo;s a bunch of tools to help you do this. I&rsquo;m sure that in some respects this leads to more formatting edge-case errors, but there&rsquo;s also a beauty to the simplicity. You can see this in how Pywal handles changing color config for a lot of applications: generate a color config in the proper format, then just include that in the larger appplication configuration.</li>
</ol>
</div>
        <div><a href="/posts/2020-07-12-swapping-color-schemes-across-all-terminals-and-vim-with-pywal-and-base16/">Permalink</a></div>
        <div class="spacer"></div>
        <hr />
        <div class="spacer"></div>
      </div>
      
      
      <div class="post">
        <div class="jbm">2020.06.25</div>
        <h1><a href="/posts/2020-06-25-vimlike/">Vimlike</a></h1>
        <div><p>This <a href="https://twitter.com/helvetica/status/1274450330726645762">thread</a>, by Zach Gage, on how genre conventions serve as interaction shortcuts, got me thinking about how I use Vim conventions in my creative tools at <a href="https://constraint.systems">Constraint Systems</a>.</p>
<p><a href="https://twitter.com/helvetica/status/1274450330726645762:">https://twitter.com/helvetica/status/1274450330726645762:</a></p>
<blockquote>
<p>7/ A big part of making games involves working with genre literacy. In game design a key concept is the idea of weight: Every rule you add has a cognitive load on the player, and you must balance the weight of your rules against how meaningful they are to the play experience.</p>
</blockquote>
<blockquote>
<p>8/ An idea might be great, but if it makes the game unwieldy, ditch it. But genre-conventions are different &ndash; they&rsquo;re weightless. They allow for an increased complexity and nuance in games, because they let designers include a huge number of rules without adding any weight.</p>
</blockquote>
<p>Almost all of the experiments on Constraint Systems use Vim conventions: at least the <code>hjkl</code> characters for movement. One of the big reasons I started the experiments was my fascination with how I felt using Vim in the terminal. The combination of a strict character grid and keyboard controls provide a feeling of stability, and through that calm, that I don&rsquo;t feel in other programs, or using a computer in general.</p>
<p>This was especially in contrast to how I&rsquo;ve felt when making gestural interface, or ones that simulate physics. Building those often felt like piling on edge-case handler on top of edge-case handler. If you did it well you could make a pleasing user experience, as long as they stuck to the path you had prepared. If they wanted to go a different direction, or you wanted to take the program in a new direction, you had to deal with that unwieldy tower, either by rearchitecting it or by adding even more code for handling the new edge cases.</p>
<p>I wanted to strip things down, and see if I could start from a more stable foundations, and I turned to Vim conventions to do that. It was a natural choice because I was chasing that feeling from Vim. Choosing Vim also gave me the interaction bootstrapping effect that Zach is talking about. Rather than asking the user to start from interaction scratch, I had the Vim foundation. That&rsquo;s not directly relevant for the majority of people, Vim is only used a subset of programmers, so it doesn&rsquo;t solve everything, but it is a place to start.</p>
<p>Even for users not familiar with Vim conventions, I think there&rsquo;s a benefit to starting the experiments there, rather than trying to introduce a new paradigm. Vim has proven itself to at least be useful to many people (and inspired a lot of loyalty). So there&rsquo;s an implicit promise that even if this looks weird, you know it can be learned and at least some people have found it useful.</p>
<p>There&rsquo;s a whole series of <a href="https://reversed.top/2016-08-13/big-list-of-vim-like-software/">Vim-like programs</a>, mostly terminal-based, that use similar key combinations. There&rsquo;s also a number of browser extensions that let you <a href="https://vim.fandom.com/wiki/Vim_key_bindings_for_web_browsers">use Vim keybindings in the browser</a>. Tiling window managers (I use <a href="https://i3wm.org/">i3wm</a>) also share a lot of conventions. Putting these all together, you can put together a system for daily use that is keyboard-focused and mostly Vim-based. I&rsquo;ve started referring to the Constraint Systems experiments as &ldquo;alternative&rdquo; interfaces. Vimlike interfaces are arguably the longest running, most fully fleshed out alternative interface for computers. I want to add to and learn from that system, and keep it alive in the face of the conventions (often imported from mobile/touchscreen design) that are dominating today.</p>
</div>
        <div><a href="/posts/2020-06-25-vimlike/">Permalink</a></div>
        <div class="spacer"></div>
        <hr />
        <div class="spacer"></div>
      </div>
      
 </div>
  </div>

    <div class="container indent">
      <div class="jbm">
     <div>About</div>
      <p>Grant Custer is a designer-programmer interested in alternative interfaces.</p>
      <p>You can see work and inspiration in progress on my <a href="https://feed.grantcuster.com">Feed</a>  and my alternative interface experiments on <a href="https://constraint.systems">Constraint Systems</a>. I also design and build prototypes for <a href="https://blog.fastforwardlabs.com">Cloudera Fast Forward</a>. I’m happy to talk on <a href="https://twitter.com/grantcuster">Twitter</a>, email: grantcuster at gmail dot com, or <a href="https://vis.social/@grantcuster">Mastodon</a>. You can see a full list of projects on my <a href="https://grantcuster.com">Index</a>.</p>
      </p>
      </div>
    </div>
    <div class="spacer"></div>
    <div class="spacer"></div>
  </body>
</html>
