<!DOCTYPE html>
<html lang="en">
  <head>
	<meta name="generator" content="Hugo 0.71.1" />
    <meta charset="utf-8">
    <link rel="icon" type="image/png" href="/favicon.png" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
      />
    <link rel="stylesheet" type="text/css" href="/font.css" />
    <link rel="stylesheet" type="text/css" href="/style.css" />
    


<title>Writing - Grant Custer</title>
<meta property="description" content="Writing about alternative interfaces and technology.">
<meta property="og:title" content="Writing - Grant Custer">
<meta property="og:description" content="Writing about alternative interfaces and technology.">
<meta property="og:image" content="https://writing.grantcuster.com/writing.png">
<meta property="og:url" content="https://writing.grantcuster.com/">
<meta property="twitter:card" content="summary_large_image">
<link rel="alternate" type="application/rss+xml" href="https://writing.grantcuster.com/rss.xml" title="Writing - Grant Custer" />

  </head>
  <body>
   <div class="hspacer"></div>
    <div class="container">
      <div class="jbm">
      <div>Grant Custer</div>
      <div><p style="margin: 0; text-indent: 2ch"><a href="https://feed.grantcuster.com">Feed</a>&nbsp; <a href="https://grantcuster.com">Index</a>&nbsp; <a href="https://twitter.com/grantcuster">Twitter</a></p></div>
      </div>
    </div>
    <div class="spacer"></div>
    
 <div class="container">
   <div style="font-weight: bold;">Writing</div> 
      
      
      <div style="padding-left: 2ch; text-indent: -2ch;">
        <span class="jbm">2020.09.12</span> <a href="/posts/2020-09-12-the-benefits-of-limitations-in-application-launchers/" style="font-weight: bold;">The benefits of limitations in application launchers</a>
      </div>
      
      
      <div style="padding-left: 2ch; text-indent: -2ch;">
        <span class="jbm">2020.09.01</span> <a href="/posts/2020-09-01-sift-release-notes/" style="font-weight: bold;">Sift: release notes</a>
      </div>
      
      
      <div style="padding-left: 2ch; text-indent: -2ch;">
        <span class="jbm">2020.08.20</span> <a href="/posts/2020-08-20-fantasy-consoles-and-framing/" style="font-weight: bold;">Fantasy consoles and framing</a>
      </div>
      
      
      <div style="padding-left: 2ch; text-indent: -2ch;">
        <span class="jbm">2020.07.30</span> <a href="/posts/2020-07-30-automadraw/" style="font-weight: bold;">Automadraw: release notes</a>
      </div>
      
      
      <div style="padding-left: 2ch; text-indent: -2ch;">
        <span class="jbm">2020.07.28</span> <a href="/posts/2020-07-28-bushido-blade-2-a-design-appreciation/" style="font-weight: bold;">Bushido Blade 2: a design appreciation</a>
      </div>
      
      
      <div style="padding-left: 2ch; text-indent: -2ch;">
        <span class="jbm">2020.07.12</span> <a href="/posts/2020-07-12-swapping-color-schemes-across-all-terminals-and-vim-with-pywal-and-base16/" style="font-weight: bold;">Swapping color schemes across all terminals and Vim with Pywal and Base16</a>
      </div>
      
      
      <div style="padding-left: 2ch; text-indent: -2ch;">
        <span class="jbm">2020.06.25</span> <a href="/posts/2020-06-25-vimlike/" style="font-weight: bold;">Vimlike</a>
      </div>
      
      <div class="spacer"></div>
      <hr />
      <div class="spacer"></div>
      
      
      <div class="post">
        <div class="jbm">2020.09.12</div>
        <h1><a href="/posts/2020-09-12-the-benefits-of-limitations-in-application-launchers/">The benefits of limitations in application launchers</a></h1>
        <div><p>In my Linux set-up, I use dmenu as an application launcher. dmenu is basically autocomplete for applications and scripts. In many ways, it&rsquo;s not so different from launching things using Spotlight on a Mac.</p>
<figure>
    <img src="/images/gif-2020-09-12_12-47-07-1599929297.gif"/> <figcaption>
            <h4>Opening 750words.com with dmenu and a launcher script.</h4>
        </figcaption>
</figure>

<p>Since I started using it, dmenu has been a convenient way to launch apps. But I&rsquo;ve only recently started to realize some of the interesting things it makes possible. A lot of the possibilities come down to the limitations of the interface, and how agnostic it is about what it launches.</p>
<p>Lately, I&rsquo;ve started putting scripts to run apps, or a combination of apps, or a combination of apps and websites and terminals, in my <code>.local/bin</code> folder where they are exposed through dmenu. Some of the things I&rsquo;ve added:</p>
<ul>
<li><code>planner</code> launches my calendar, personal email, and work email all in different firefox windows.</li>
<li><code>750words</code> launches <a href="https://750words.com/">https://750words.com/</a> in a new firefox window.</li>
<li><code>blog</code> launches a terminal set to my blog directory, a terminal window running <code>npm run dev</code> to run the local versions, and a firefox window open to localhost.</li>
<li><code>record</code> starts a screen recording. <code>gif_2x</code> converts the last screen recording into a GIF running at 2x speed. When it&rsquo;s done it opens a window showing the GIF and listing the file size.</li>
</ul>
<p>Some of these are rather involved scripts, some are very simple. What I&rsquo;ve been surprised by is how different even the simple ones feel when launched from the application launcher. Something like <code>750words</code> is given its own space and weight as an activity, promoted from being a website I visit among other websites. It also makes my intention going in very clear, if I open <code>750words</code> my intention is to do it, versus getting lost browsing (even though, functionally, all it is doing is opening <code>750words</code> in a web browser).</p>
<p>I used to go after the same effect on macOS, especially for web applications. There were several programs that would let you run a website within its own application container. That meant you could launch it from Spotlight. There were always rough edges that made clear it was a bit of a hack though. The difference between the wrapped web apps and the true apps was noticeable. This is partly because apps on macOS are expected to be polished, with their own nice-looking icon.</p>
<p><strong>The lesson I&rsquo;m interested in with dmenu, is how the limitations (an application is only a name among names) make it much easier and more satisfying to add user-configured applications and scripts.</strong> I am surprised by how different it feels to have my scripts sit right alongside the other applications. As with my experience of lots of Linux-related stuff, it is a feeling of empowerment. It feels like a level of customization above what I&rsquo;m used to, computer as tool I am control of, rather than something I&rsquo;m wrestling with.</p>
<h2 id="content-limitations-in-web-previews">Content limitations in web previews</h2>
<p>I&rsquo;ve noticed a similar effect in making websites. Often you end up making a website that you want to display a preview of on another website. I do this on <a href="https://constraint.systems">Constraint Systems</a> and for the <a href="https://blog.fastforwardlabs.com/prototypes">Cloudera Fast Forward prototypes</a>. Through experience, I&rsquo;ve learned you want to make the number of assets needed for the list preview as few as possible. In the case of Constraint Systems, it is a tile, a description, a preview image, and a preview GIF. It is tempting to require more elements (like several preview images) to provide a fancier preview. Whatever you require, however, you&rsquo;re going to have to provide for every link going forward. A surprising amount of friction can come from needing to create preview assets (and also the deploy process for those assets). Enough friction to cause you to make fewer tools or blog posts because you&rsquo;re dreading that part of the process.</p>
<p>Website meta tags have been an interesting development in relation to this. Used for creating previews on shared Twitter and Facebook links, the main meta tags are limited enough (title, description, preview image) that they&rsquo;re worth doing, and now that they&rsquo;re being regularly done across sites, even more services can dependably use them to unfurl links.</p>
</div>
        <div><a href="/posts/2020-09-12-the-benefits-of-limitations-in-application-launchers/">Permalink</a></div>
        <div class="spacer"></div>
        <hr />
        <div class="spacer"></div>
      </div>
      
      
      <div class="post">
        <div class="jbm">2020.09.01</div>
        <h1><a href="/posts/2020-09-01-sift-release-notes/">Sift: release notes</a></h1>
        <div><p><img src="/images/sift-1599052864.gif" alt=""></p>
<p><a href="https://sift.constraint.systems">Sift</a> is an experimental image editor that slices an image into layers. You can offset the layers to produce interference patterns and pseudo-3D effects. It uses an additive blending mode and pixel-based light splitting algorithm.</p>
<h2 id="origins">Origins</h2>
<p>I started planning Sift while standing in the ocean, thinking about waves and how to use a wave effect on the pixels of an image. I&rsquo;ve gotten used to thinking of images as a grid of pixels, and I&rsquo;ve done some experiments using HTML canvas and javascript to move, or even flow, pixels around. I started trying to imagine how pixels could cycle &ldquo;below the surface&rdquo; and then pop up on top.</p>
<p>For a wave effect I needed pixel depth. I needed to figure out a way to transform an array of pixels from 2D into 3D. I thought about RGB values. Coud I use the color value as the third dimension by using it to make a pixel stack? What if for a pixel with a red value of 100 I stacked 100 red pixels?</p>
<p>I ended up using the pixel stack idea (and cutting the wave idea, for now), but I had to get the right blending mode and slicing algorithm to get things working.</p>
<h2 id="slicing-colors">Slicing colors</h2>
<p>One of the issues with making pixel-specific stacks was that a pixel doesn&rsquo;t have just one color value, it has three (red, green, and blue). I decided to put the &ldquo;brightest combo&rdquo; at the top. So for an RGB value of <code>[10,16,24]</code> I would start the stack with 10 <code>[1,1,1]</code> pixels. Then <code>16 - 10 = 6</code> for 6 <code>[0,1,1]</code> pixels, and, finally, <code>24 - 16 = 8</code> for 8 <code>[0,0,1]</code> pixels. This means the white-ish pixels are on top, and then, as those are finished, you see a kind of exhaust trail of color.</p>
<p>(For performance reasons, the finished app bins values according to the number of layers. So instead of 192 stacked <code>[1,1,1]</code> pixels for a <code>[192,192,192]</code> value, a 16 layer edit in Sift bins <code>192 / 16 = 12</code>, for 12 <code>[16,16,16]</code> pixels.)</p>
<h2 id="blend-mode">Blend mode</h2>
<figure>
<img src="/images/sift-logo-1599052499.png" 
style="max-width: 256px;" />
<figcaption>Overlapping red, green, and blue squares in additive blend mode.</figcaption>
</figure>
<p>The color slicing only works with right blend mode, where each layer&rsquo;s RGB value is added together. For canvas, the blend setting is called <code>globalCompositeOperation</code> and the value for additive blending is <code>lighter</code>.</p>
<p>Additive blending, while not what I&rsquo;m used to working with for computers, is actually how our eyes perceive light. I vaguely knew this, but it&rsquo;s been fun to play with it in the app and get a real feel for the consequences.</p>
<h2 id="layers-and-offsets">Layers and offsets</h2>
<p>Originally, I thought I&rsquo;d build this app in Three.js, where you could rotate around the pixel (actually voxel) stacks in 3D. I thought maybe I could get the perspective such that it appeared a whole image at the start, but as you zoomed in you could see cracks between. I&rsquo;m still not totally sure if the math for that could be worked out. But I quickly ran into performance issues from trying to render even binned values for every pixel in an image, so I switched over to HTML canvas. (I&rsquo;m sure there are ways to do this in Three.js, possibly utilizing shaders? If you have ideas let me know.)</p>
<p>I knew performance might be a struggle in canvas as well, but I had a plan. I know canvas can redraw image files (with <code>drawImage()</code>) quickly. On image load I split the image into a set number of layers (16 by default), doing all the bin calculations. The render function (peformed whenever the x and y offsets are changed) then just draws those layer images on top of one another and the blend mode takes care of the rest.</p>
<h2 id="the-result">The result</h2>
<p>Sometimes I have specific goals for <a href="https://constraint.systems">Constraint Systems</a> projects, other times I just follow an effect to its end. Other than the &ldquo;stack&rdquo; idea, I didn&rsquo;t really have a goal for what Sift should make images into. I was pleasantly surprised by the early results, right after I flipped the blend mode switch. For certain images, it produces a pseudo-3d effect. <a href="https://twitter.com/the_ezekiel/status/1299095952339410945">Ezekial suggested it&rsquo;s like an aerogel</a>. It is also kind of like badly calibrated color separation in a TV (but different because of how it is stacked). Other images you can get kind of an otherwordly thing. I watched <em>Twin Peaks: The Return</em> recently and it reminded of me some of the face distortions from that.</p>
<h2 id="future-experiments">Future experiments</h2>
<p>I&rsquo;m definitely intrigued by the possibilities of additive blending. Partly due to <a href="https://twitter.com/tylerangert/status/1299163673424879617">Tyler&rsquo;s suggestion</a>, I want to try layering video frames on top of each other using a similar process.</p>
<h2 id="larger-goals">Larger goals</h2>
<p>One of the goals of the Constraint Systems projects is to get really used to thinking of images as a collection of pixels, and work &ldquo;with the grain&rdquo; of how computers store images. I think the stacking and layer ideas are good signs that that part of the project is working. My intuition for what might produce interesting image results has gotten better. The mix of having a good idea of what I wanted but not being sure of the final effect is a fun one &ndash; it feels like a collaboration with the computer.</p>
</div>
        <div><a href="/posts/2020-09-01-sift-release-notes/">Permalink</a></div>
        <div class="spacer"></div>
        <hr />
        <div class="spacer"></div>
      </div>
      
      
      <div class="post">
        <div class="jbm">2020.08.20</div>
        <h1><a href="/posts/2020-08-20-fantasy-consoles-and-framing/">Fantasy consoles and framing</a></h1>
        <div><p>I&rsquo;ve been thinking a lot about <a href="https://www.lexaloffle.com/bbs/?tid=31634">Joseph White&rsquo;s talk on his motivations for making the PICO-8 fantasy console</a>. There&rsquo;s so much in the talk that resonates with what I&rsquo;ve been thinking about for <a href="https://constraint.systems">Constraint Systems</a>: about how carefully selected constraints change the feel of working, making it feel more focused, and even cozy.</p>
<p>Since viewing the talk I&rsquo;ve been thinking a lot about how he frames PICO-8 with the idea of a fantasy console and cartridges, and what I could do for framing Constraint Systems. I&rsquo;ve toyed with the idea of making the Constraint Systems homepage into a simulation of a fantasy operating system with each experiment as an application. Part of the feeling I want to capture is going to the middle school computer lab in the mid 90s and trying out the strange collection of software the school had preloaded (even though the variety of the internet is great, there is something comforting and cozy in the idea of a finite number of programs to explore).</p>
<p>I had been thinking of the operating system metaphor as a fun, possibly attention-attracting, thing, that I should get around to sometime. After viewing White&rsquo;s talk, however, I think it&rsquo;s something I should prioritize. Framing Constraint Systems as a fantasy computer/operating system could (done well) communicate my vision of the project, and communicate it not in a long text somebody has to read, but as a general vibe. In the best case, they would &ldquo;get&rdquo; the project just by looking at the homepage. This is what &ldquo;branding&rdquo; is, I suppose, it just feels more tied to the core of the project here than I&rsquo;m used to thinking of it.</p>
<p>Extensions of the idea:</p>
<ul>
<li>The simplest version is just presenting the Constraint System experiments as different apps on a fantasy operating system. I could also try and make them behave as apps. Possibly using iframes and a tiling window management system. A further step (that I&rsquo;ve always wanted to do) would be to let you pipe the output of one application into another.</li>
<li>Picking up on the middle school computer lab vibe, I wonder if Constraint Systems could someday be a physical computer lab, where computers limited to only CS software are available free for anyone to use, and I administer the lab and get to see what people make and can adjust or make new applications based on what people are doing with it. (I think this is at least a good idea for an installation or area at a hackerspace.)</li>
</ul>
</div>
        <div><a href="/posts/2020-08-20-fantasy-consoles-and-framing/">Permalink</a></div>
        <div class="spacer"></div>
        <hr />
        <div class="spacer"></div>
      </div>
      
      
      <div class="post">
        <div class="jbm">2020.07.30</div>
        <h1><a href="/posts/2020-07-30-automadraw/">Automadraw: release notes</a></h1>
        <div><figure>
    <img src="/images/automadraw-1596131469.gif"/> 
</figure>

<p><a href="https://automadraw.constraint.systems">Automadraw</a> is a new experimental app I made for my <a href="https://constraint.systems">Constraint Systems</a> project. It lets you draw and evolve your drawing using cellular automata using two keyboard controlled cursors.</p>
<h2 id="what-is-it-for">What is it for</h2>
<p>I think there are two main uses for Automadraw:</p>
<ol>
<li>Get more familiar with the cellular automata (Conway&rsquo;s Game of Life and Langton&rsquo;s Ant) that it runs. You can quickly experiment with lots of different patterns.</li>
<li>Draw something collaboratively with the automata. The interaction design aims to make working with the automata intuitive. These design techniques (two cursors, keyboard controls) could be applied to a wide range of creative apps.</li>
</ol>
<h2 id="two-cursors">Two cursors</h2>
<p>I had originally planned to use just one cursor, and have it shift between draw mode and &ldquo;act&rdquo; (run automata) mode. As I experimented I found that usually for act mode I wanted to cover a large area and draw mode a smaller one. Having to resize when switching between modes ruined the flow, so I split the cursors up.</p>
<p>Splitting them up opened up some new possibilities. I realized I could set it up so that I could use each cursor&rsquo;s actions (draw or act, respectively) regardless of which one was in focus. This set up a couple of interactions I really liked:</p>
<figure>
    <img src="/images/gif-2020-07-30_13-53-52@2x-1596131748.gif"/> <figcaption>
            <h4>Sweeping: draw some lines then use a long, narrow act cursor to sweep over the lines, running Game of Life over each sweep step. This usually produces intricate symmetrical designs that really feel like they&#39;re evolving through each sweep.</h4>
        </figcaption>
</figure>

<figure>
    <img src="/images/gif-2020-07-30_13-58-43@2x-1596132012.gif"/> <figcaption>
            <h4>Active environment: resize the act cursor over a large area, use the draw cursor and have it move in and out of the act area as the automata is run. The act area becomes an environment where different rules apply. It feels like a physics or chemistry simulation.</h4>
        </figcaption>
</figure>

<p>This set-up is uniquely suited to keyboard cursor controls, where each cursor&rsquo;s position is fully visible and fully predictable (versus a touch interface where you would have to use multiple fingers and the fingers themselves would obscure your view of the changes taking place). I use Vim-like keyboard controls because I honestly prefer them. My suspicion is that they may enable modes of interaction other methods do not. I was happy to find an interaction that fit them so well. I&rsquo;m looking forward to seeing how even more multiple cursors feel in future experiments.</p>
<p><a href="https://stamp.constraint.systems">Stamp</a> is a different example of the possibilities of multiple cursors: two cursors across two canvases.</p>
<p><img src="/images/stamp-1596133133.gif" alt=""></p>
<h2 id="keyboard-events">Keyboard events</h2>
<p>Part of the reason the two cursor interaction is interesting is because of an accident of keyboard event handling. A lot of the Constraint System experiments let you hold down multiple keys. This is tricky to handle in Javascript for everything except modifier keys. The main issue is that if you&rsquo;re holding down one key, and start holding an additional one, the new one will take over the <code>keyDown</code> event. The solution is to make a keymap object, store each key on <code>keyDown</code> and remove it on on <code>keyUp</code>. You then use the keymap object for the source of truth about what is pressed on each <code>keyDown</code> event.</p>
<p>This technique mostly just works, but there turns out to be an issue, arguably a bug, that makes things like the &ldquo;sweep&rdquo; technique I discussed above possible. If you are pressing one key, add another key, then let up on the second key, <code>keyDown</code> events stop firing. For Automadraw, this behavior enables this interaction:</p>
<ul>
<li>Hold down &lsquo;a&rsquo; to run automata, press a direction key to move the act cursor. When you let up on the direction key the automata will pause running&hellip; until you press a direction key again. Using this technique you can run &ldquo;sweeps&rdquo;, moving the act cursor across a set of pixels, automatically running the automata once each step.</li>
</ul>
<p>This interaction was a happy accident, and I&rsquo;m looking forward to thinking about how to expand and support it more in future experiments.</p>
<h2 id="limitations-and-future-possiblities">Limitations and future possiblities</h2>
<p>I had been wanting to experiment with cellular automata and a drawing app for a long time. For this experiment, I needed to really scope things down in order to get started. I restricted the drawing app colors to 1-bit (on or off). This usefully limited the number of cellular automata I could use and the number of interactions I needed to support. I also made the app &lsquo;pixels&rsquo; large, at 16 actual pixels. This makes drawing quick and the automata actions more legible, but also restricts the fidelity of the final image. Someday I would like to build a cellular automata app more focused on image editing, where you could evolve parts of an image at a higher fidelity. That would also involve using automata that use color information, there are some interesting examples of those in <a href="https://www.youtube.com/watch?v=lyZUzakG3bE">this CA Lab demo video</a>.</p>
<h2 id="code">Code</h2>
<p>The code for Automadraw is <a href="https://github.com/constraint-systems/automadraw">avaliable on github</a>.</p>
<h3 id="slowly-recreating-react">Slowly recreating React</h3>
<p>I built the early Constraint Systems experiments using React, but have moved off of it to vanilla Javascript for the most recent ones. I do find myself recreating a lot of the set-up of React. I&rsquo;ve found out firsthand that a lot of the React boilerplate I questioned is in there to work around the constraints of Javascript itself. I may switch back to React sometime, but right now I&rsquo;m still enjoying experimenting on my own. It is also true that a lot of the benefits of React don&rsquo;t mesh well with HTML canvas, which is where most of the action for this app takes place.</p>
<h3 id="es6-modules">ES6 modules</h3>
<p>This was the first project where I used ES6 modules. It was nice to be able to organize the code into sections like <code>keyboard</code> and <code>state</code>. I&rsquo;ll continue to use them and refine my organization going forward. Maybe someday I&rsquo;ll have a true base starter kit I can reuse across projects.</p>
<h3 id="canvas-compositing">Canvas compositing</h3>
<p>One switch I&rsquo;ve made that I&rsquo;ve been very happy with, is moving from rendering multiple canvas DOM elements on top of eachother, to placing only one canvas on the dom and compositing the different layers (in this case: <code>cursor</code>, <code>grid</code>, <code>art</code>) on to the DOM layer for each render. My rendering code is a little knotty, but it still feels a lot cleaner than stacking the canvases in the DOM.</p>
</div>
        <div><a href="/posts/2020-07-30-automadraw/">Permalink</a></div>
        <div class="spacer"></div>
        <hr />
        <div class="spacer"></div>
      </div>
      
      
      <div class="post">
        <div class="jbm">2020.07.28</div>
        <h1><a href="/posts/2020-07-28-bushido-blade-2-a-design-appreciation/">Bushido Blade 2: a design appreciation</a></h1>
        <div><p>Bushido Blade 2 was a Playstation game I played a lot in high school. It was a fighting game with swords, and its main hook was that instead of health bars, damage was based on where you struck your opponent. You could injure limbs or finish the an opponent with one strike if you hit the right spot.</p>
<p><img src="/images/bushido-blade-2-1595969059.jpg" alt=""></p>
<p>Design-wise, Bushido Blade rethought the premise of a fighting game from first principles. I love what this approach allowed them to do in terms of immersion: during a fight, nothing is visible on the screen except the two characters.</p>
<p>This is what I want to do when I design something: communicate everything through the core action. Design things so well that you don&rsquo;t need to bring in health bars and labels.</p>
<p>Bushido Blade 2, like most of the games I played, was well-reviewed but never really that popular. I remember it having a pretty good story-mode with fun voice acting.</p>
</div>
        <div><a href="/posts/2020-07-28-bushido-blade-2-a-design-appreciation/">Permalink</a></div>
        <div class="spacer"></div>
        <hr />
        <div class="spacer"></div>
      </div>
      
      
      <div class="post">
        <div class="jbm">2020.07.12</div>
        <h1><a href="/posts/2020-07-12-swapping-color-schemes-across-all-terminals-and-vim-with-pywal-and-base16/">Swapping color schemes across all terminals and Vim with Pywal and Base16</a></h1>
        <div><figure>
    <img src="/images/gif-2020-07-11_08-51-21@2x-1594472001.gif"/> <figcaption>
            <h4>Switching between light and dark colorschemes in all terminals using a hotkey.</h4>
        </figcaption>
</figure>

<p>I recently got instant light and dark color scheme toggle working for all open terminals, including those running Vim. I used a combination of techniques from <a href="https://github.com/dylanaraps/pywal">Pywal</a> and <a href="https://github.com/chriskempson/base16-shell">Base16 shell</a>, and learned some things about scripting in Linux and escape sequences along the way.</p>
<h2 id="pywal">Pywal</h2>
<p><a href="https://github.com/dylanaraps/pywal">Pywal</a> is a package for switching color schemes system wide. Mostly it is known for generating those color schemes from images, but it also comes bundled with a bunch of predefined themes. I wanted to use it to switch between <a href="https://github.com/morhetz/gruvbox">gruvbox</a> light and dark themes.</p>
<p>Pywal can change the color schemes for all open terminals automatically. It can also switch colors for several other Linux applications.</p>
<h3 id="how-pywal-works">How Pywal works</h3>
<p>This is what the gruvbox dark theme looks like in Pywal&rsquo;s colorschemes directory:</p>
<pre><code># Pywal gruvbox colorscheme
{
  &quot;special&quot;: {
    &quot;background&quot;: &quot;#282828&quot;,
    &quot;foreground&quot;: &quot;#a89984&quot;,
    &quot;cursor&quot;: &quot;#ebdbb2&quot;
  },
  &quot;colors&quot;: {
    &quot;color0&quot;: &quot;#282828&quot;,
    &quot;color1&quot;: &quot;#cc241d&quot;,
    &quot;color2&quot;: &quot;#d79921&quot;,
    &quot;color3&quot;: &quot;#b58900&quot;,
    &quot;color4&quot;: &quot;#458588&quot;,
    &quot;color5&quot;: &quot;#b16286&quot;,
    &quot;color6&quot;: &quot;#689d6a&quot;,
    &quot;color7&quot;: &quot;#a89984&quot;,
    &quot;color8&quot;: &quot;#928374&quot;,
    &quot;color9&quot;: &quot;#cc241d&quot;,
    &quot;color10&quot;: &quot;#d79921&quot;,
    &quot;color11&quot;: &quot;#b58900&quot;,
    &quot;color12&quot;: &quot;#458588&quot;,
    &quot;color13&quot;: &quot;#b16286&quot;,
    &quot;color14&quot;: &quot;#689d6a&quot;,
    &quot;color15&quot;: &quot;#a89984&quot;
  }
}
</code></pre><p>A JSON file declaring each color. OK, but how do those colors get communicated to the applications? The <a href="https://github.com/dylanaraps/pywal/wiki/Customization">customization</a> instructions mention <code>~/.cache/wal</code> a lot, so let&rsquo;s see what&rsquo;s in there:</p>
<pre><code># ls ~/.cache/wal
colors                      colors-putty.reg         colors-tty.sh        colors.Xresources
colors.css                  colors-rofi-dark.rasi    colors-wal-dmenu.h   colors.yml
colors.hs                   colors-rofi-light.rasi   colors-wal-dwm.h     sequences
colors.json                 colors.scss              colors-wal-st.h      wal
colors-kitty.conf           colors.sh                colors-wal-tabbed.h
colors-konsole.colorscheme  colors-speedcrunch.json  colors-wal.vim
colors-oomox                colors-sway              colors-waybar.css
</code></pre><p>Ah! It&rsquo;s using the JSON color schemes to generate application specific color scheme files. This is  a great example of figuring out which level of abstraction to intervene at: Pywal defines a standard color scheme spec and uses application specific templates to generate files from it. If anyone wants to add a new color scheme or application template the procedure for doing so is clear and self-contained.</p>
<h3 id="live-reload-and-escape-sequences">Live reload and escape sequences</h3>
<p>To change color schemes in most applications, Pywal builds the color config file and sends a message to the application to reload. For terminals, it does something different. It uses <a href="https://en.wikipedia.org/wiki/ANSI_escape_code">ANSI escape codes</a>, invisible character sequences that give a terminal color and formatting instructions, to instantly swap out the colors.</p>
<p>You can see how this works in Pywal&rsquo;s <a href="https://github.com/dylanaraps/pywal/blob/master/pywal/sequences.py">sequences.py</a>. The conversion from the JSON hex color to the terminal readable escape sequence is here:</p>
<pre><code># from pywal/sequences.py
def set_color(index, color):
    &quot;&quot;&quot;Convert a hex color to a text color sequence.&quot;&quot;&quot;
    if OS == &quot;Darwin&quot; and index &lt; 20:
        return &quot;\033]P%1x%s\033\\&quot; % (index, color.strip(&quot;#&quot;))

    return &quot;\033]4;%s;%s\033\\&quot; % (index, color)
</code></pre><p>Escape sequences, which I&rsquo;ve only seen otherwise in terminal prompt customizations, are not easy to parse or write for a human, but as part of a script they&rsquo;re a powerful way to achieve instant terminal color palette swaps. I don&rsquo;t think anyone would design an API featuring anything like escape sequences today, but in this case they make for a much smoother experience than a &ldquo;change config and reload&rdquo; cycle.</p>
<p>Now let&rsquo;s look at how the escape sequences get sent to the terminal:</p>
<pre><code># from pywal/sequences.py
def send(colors, cache_dir=CACHE_DIR, to_send=True, vte_fix=False):
    &quot;&quot;&quot;Send colors to all open terminals.&quot;&quot;&quot;
    if OS == &quot;Darwin&quot;:
        tty_pattern = &quot;/dev/ttys00[0-9]*&quot;

    else:
        tty_pattern = &quot;/dev/pts/[0-9]*&quot;

    sequences = create_sequences(colors, vte_fix)

    # Writing to &quot;/dev/pts/[0-9] lets you send data to open terminals.
    if to_send:
        for term in glob.glob(tty_pattern):
        util.save_file(sequences, term)

    util.save_file(sequences, os.path.join(cache_dir, &quot;sequences&quot;))
    logging.info(&quot;Set terminal colors.&quot;)
</code></pre><p>This shows the power of Unix&rsquo;s &ldquo;everything is a file&rdquo; approach. The script locates the file for each open terminal and writes the sequences directly to it (same as you would write to a text file). And it just works.</p>
<h3 id="vim-issues">Vim issues</h3>
<p>Pywal worked beautifully for me except for Vim. It may not be an issue depending on how your Vim and terminal color schemes are configured, but in my case to get the proper color scheme I needed to not only swap the terminal colors but also toggle the <code>background</code> setting in Vim between <code>light</code> and <code>dark</code>. I eventually got this working using <code>xdotool</code> to trigger a toggle hotkey in Vim, but it was not nearly as clean a process as the main <code>write directly to terminal</code> Pywal approach. So I went hunting for other solutions.</p>
<h2 id="base16">Base16</h2>
<p><a href="https://github.com/chriskempson/base16">Base16</a> is a standardized format for creating 16-color terminal color schemes. Those color schemes can then be combined with templates to produce color configurations for a wide range of applications. <a href="https://github.com/chriskempson/base16-shell">Base16 shell</a> is a set of scripts that converts those color schemes into escape sequences to be applied to terminals.</p>
<p>The main draw for me for Base16 was that their <a href="https://github.com/chriskempson/base16-vim">Vim package</a> lets you set a base Vim color scheme that works wonderfully with any Base16 terminal color scheme, no <code>background</code> setting change needed. (Pywal does also have a version of this, but I was much less impressed with the base Pywal Vim color scheme.)</p>
<h3 id="applying-base16-to-all-open-terminals">Applying Base16 to all open terminals</h3>
<p>Base16 shell, unlike Pywal, only applies the new color scheme to your current terminal. This set-up has its own interesting possibilities (different color schemes for terminals where you <code>ssh</code>ed; random color scheme for each new terminal) but I wanted the color scheme to be applied globally. So I frankensteined a bit of Pywal into the Base16 shell script:</p>
<pre><code># Modified Base16 shell script
...
terms=`ls /dev/pts/[0-9]*`
terms=&quot;${terms} $PWD/.cache/base16/sequences&quot;
for term in $terms
do
  # 16 color space
  put_template 0  $color00
  ...
done
...
</code></pre><p>I converted the Pywal <code>send</code> function into Bash, and wrapped the part of the shell script that sent the escape sequences. I also set it to save the sequences to a cache, to be run for each new terminal. This got me the exact terminal and Vim color swap I wanted. I set up a toggle script and assigned a hotkey using my window mananger <code>i3wm</code>. If I want to swap color palettes on other applications, I can add the necessary steps into the toggle script. I like knowing exactly what the toggle script is doing, vs. Pywal&rsquo;s &ldquo;we&rsquo;ll try and take care of everything we can&rdquo;.</p>
<figure>
    <img src="/images/gif-2020-07-11_08-51-21@2x-1594472001.gif"/> <figcaption>
            <h4>The final result.</h4>
        </figcaption>
</figure>

<p>I just modified the shell scripts for the specific gruvbox color schemes I wanted, but the cleaner way to do it would be to modify the shell template and regenerate them all. For now, I&rsquo;m happy I got everything working and learned more about escape sequences and the structure of the Linux file system in the process.</p>
<h2 id="lessons-learned">Lessons learned</h2>
<p>Part of why I&rsquo;m exploring Linux and scripting is to get a feel for how software could be more customizeable. A few things were especially interesting to me here:</p>
<ol>
<li>Writing to all open terminals is a great example of the power of &ldquo;everything is a file&rdquo;. Being able to locate all the open terminals and send the escape sequences to them through the file system interface shifted my mental model about scripting possibilities. I usually think of applications and files as very separate, and this blurred that a bit. I&rsquo;d seen people talk about the power of the file concept before but this is one of the first times its been useful for something I was trying to do. I will spend some time thinking about how the file system concept could be applied to the software I make.</li>
<li>Escape sequences. I&rsquo;m trying to think if you would ever want to include them (or a concept like them) in an application created from scratch. I don&rsquo;t think so. They&rsquo;re useful when you want to do formatting and the only interface you have with the program is that you can write text characters to it. The style is embedded in the text, but because the embedding is invisible it&rsquo;s going to be pretty unpredictable if you try and move it between programs.</li>
<li>The power of plain text and the being able to manipulate plain text. Lots of the config files for Linux applications are in a simple, plain text format. Coming from Javascript, I&rsquo;m more used to intaking data as JSON and doing the manipulation in Javascript. In Linux you&rsquo;re more likely to manipulate the text directly, and there&rsquo;s a bunch of tools to help you do this. I&rsquo;m sure that in some respects this leads to more formatting edge-case errors, but there&rsquo;s also a beauty to the simplicity. You can see this in how Pywal handles changing color config for a lot of applications: generate a color config in the proper format, then just include that in the larger appplication configuration.</li>
</ol>
</div>
        <div><a href="/posts/2020-07-12-swapping-color-schemes-across-all-terminals-and-vim-with-pywal-and-base16/">Permalink</a></div>
        <div class="spacer"></div>
        <hr />
        <div class="spacer"></div>
      </div>
      
      
      <div class="post">
        <div class="jbm">2020.06.25</div>
        <h1><a href="/posts/2020-06-25-vimlike/">Vimlike</a></h1>
        <div><p>This <a href="https://twitter.com/helvetica/status/1274450330726645762">thread</a>, by Zach Gage, on how genre conventions serve as interaction shortcuts, got me thinking about how I use Vim conventions in my creative tools at <a href="https://constraint.systems">Constraint Systems</a>.</p>
<p><a href="https://twitter.com/helvetica/status/1274450330726645762:">https://twitter.com/helvetica/status/1274450330726645762:</a></p>
<blockquote>
<p>7/ A big part of making games involves working with genre literacy. In game design a key concept is the idea of weight: Every rule you add has a cognitive load on the player, and you must balance the weight of your rules against how meaningful they are to the play experience.</p>
</blockquote>
<blockquote>
<p>8/ An idea might be great, but if it makes the game unwieldy, ditch it. But genre-conventions are different &ndash; they&rsquo;re weightless. They allow for an increased complexity and nuance in games, because they let designers include a huge number of rules without adding any weight.</p>
</blockquote>
<p>Almost all of the experiments on Constraint Systems use Vim conventions: at least the <code>hjkl</code> characters for movement. One of the big reasons I started the experiments was my fascination with how I felt using Vim in the terminal. The combination of a strict character grid and keyboard controls provide a feeling of stability, and through that calm, that I don&rsquo;t feel in other programs, or using a computer in general.</p>
<p>This was especially in contrast to how I&rsquo;ve felt when making gestural interface, or ones that simulate physics. Building those often felt like piling on edge-case handler on top of edge-case handler. If you did it well you could make a pleasing user experience, as long as they stuck to the path you had prepared. If they wanted to go a different direction, or you wanted to take the program in a new direction, you had to deal with that unwieldy tower, either by rearchitecting it or by adding even more code for handling the new edge cases.</p>
<p>I wanted to strip things down, and see if I could start from a more stable foundations, and I turned to Vim conventions to do that. It was a natural choice because I was chasing that feeling from Vim. Choosing Vim also gave me the interaction bootstrapping effect that Zach is talking about. Rather than asking the user to start from interaction scratch, I had the Vim foundation. That&rsquo;s not directly relevant for the majority of people, Vim is only used a subset of programmers, so it doesn&rsquo;t solve everything, but it is a place to start.</p>
<p>Even for users not familiar with Vim conventions, I think there&rsquo;s a benefit to starting the experiments there, rather than trying to introduce a new paradigm. Vim has proven itself to at least be useful to many people (and inspired a lot of loyalty). So there&rsquo;s an implicit promise that even if this looks weird, you know it can be learned and at least some people have found it useful.</p>
<p>There&rsquo;s a whole series of <a href="https://reversed.top/2016-08-13/big-list-of-vim-like-software/">Vim-like programs</a>, mostly terminal-based, that use similar key combinations. There&rsquo;s also a number of browser extensions that let you <a href="https://vim.fandom.com/wiki/Vim_key_bindings_for_web_browsers">use Vim keybindings in the browser</a>. Tiling window managers (I use <a href="https://i3wm.org/">i3wm</a>) also share a lot of conventions. Putting these all together, you can put together a system for daily use that is keyboard-focused and mostly Vim-based. I&rsquo;ve started referring to the Constraint Systems experiments as &ldquo;alternative&rdquo; interfaces. Vimlike interfaces are arguably the longest running, most fully fleshed out alternative interface for computers. I want to add to and learn from that system, and keep it alive in the face of the conventions (often imported from mobile/touchscreen design) that are dominating today.</p>
</div>
        <div><a href="/posts/2020-06-25-vimlike/">Permalink</a></div>
        <div class="spacer"></div>
        <hr />
        <div class="spacer"></div>
      </div>
      
 </div>
  </div>

    <div class="container indent">
      <div class="jbm">
     <div>About</div>
      <p>Grant Custer is a designer-programmer interested in alternative interfaces.</p>
      <p>You can see work and inspiration in progress on my <a href="https://feed.grantcuster.com">Feed</a>  and my alternative interface experiments on <a href="https://constraint.systems">Constraint Systems</a>. I also design and build prototypes for <a href="https://blog.fastforwardlabs.com">Cloudera Fast Forward</a>. Iâ€™m happy to talk on <a href="https://twitter.com/grantcuster">Twitter</a>, email: grantcuster at gmail dot com, or <a href="https://vis.social/@grantcuster">Mastodon</a>. You can see a full list of projects on my <a href="https://grantcuster.com">Index</a>.</p>
      </p>
      </div>
    </div>
    <div class="spacer"></div>
    <div class="spacer"></div>
  </body>
</html>
